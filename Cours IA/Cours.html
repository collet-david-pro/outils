<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Présentation Dynamique</title>

  <!-- Tailwind en CDN pour le dev -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- remark.js servi en local pour éviter les soucis de MIME -->
  <script src="./remark-latest.min.js"></script>

  <style>
    /* Fond transparent + texte blanc */
    .remark-slide,
    .remark-slide-content {
      background-color: transparent !important;
      color: white !important;
    }
    /* Empilement et transitions */
    .remark-container { position: relative; width:100vw; height:100vh; overflow:hidden; }
    .remark-slides  { position: relative; width:100%;  height:100%; }
    .remark-slide   {
      position: absolute !important;
      top: 0; left: 0; width:100%; height:100%;
      padding: 2rem; box-sizing: border-box;
      opacity: 0; transform: scale(0.8);
      transition: opacity .6s ease, transform .6s ease;
    }
    .remark-slide[data-state="current"] {
      opacity: 1; transform: scale(1); z-index:1;
    }
  </style>
</head>

<body class="bg-gray-900">

  <!-- message d’erreur si ça plante -->
  <div id="fallback" class="p-4 bg-red-700 text-white hidden"></div>

  <script>
    // 1) On récupère slides.md
    fetch('slides.md')
      .then(resp => {
        if (!resp.ok) throw new Error(`Impossible de charger slides.md (${resp.status})`);
        return resp.text();
      })
      .then(md => {
        // 2) On initialise remark avec le contenu MD
        const slideshow = remark.create({
          source: md,
          highlightStyle: 'monokai',
          slideNumber: true,
          ratio: '16:9',
          navigation: { scroll:false, touch:true }
        });

        // 3) Gestion des transitions
        slideshow.on('showSlide', slide => {
          document.querySelectorAll('.remark-slide')
            .forEach(s => s.setAttribute('data-state','hidden'));
          slide.slideElement.setAttribute('data-state','current');
        });

        // 4) Astuce navigation
        window.addEventListener('load', () => {
          const note = document.createElement('div');
          note.className = 'fixed bottom-4 right-4 p-2 bg-gray-700 text-white rounded';
          note.innerText = '← / → pour naviguer';
          document.body.appendChild(note);
          setTimeout(() => note.remove(), 4000);
        });
      })
      .catch(err => {
        // Affiche l’erreur à l’utilisateur
        const fb = document.getElementById('fallback');
        fb.textContent = `Erreur : ${err.message}`;
        fb.classList.remove('hidden');
        console.error(err);
      });
  </script>

</body>
</html>
